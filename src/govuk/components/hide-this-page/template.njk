{% from "../button/macro.njk" import govukButton %}

{# Set the URL of the current tab (defaults to Google) #}
{%- if params.currentTabURL %}
  {% set currentTabURL = params.currentTabURL %}
{% else %}
  {% set currentTabURL = "http://www.google.com" %}
{% endif %}
{# Set the URL of the new tab (defaults to BBC Weather) #}
{%- if params.newTabURL %}
  {% set newTabURL = params.newTabURL %}
{% else %}
  {% set newTabURL = "http://bbc.co.uk/weather" %}
{% endif %}
{# Set the text of the button (defaults to 'Hide this page') #}
{%- if params.text %}
  {% set text = params.text %}
{% else %}
  {% set text = "Hide this page" %}
{% endif %}
<div {%- if params.id %} id="{{ params.id }}"{% endif %} class="govuk-hide-this-page {%- if params.classes %} {{ params.classes }}{% endif %}"
{%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  <script>
    function govukHideThisPage() {
        window.open("{{newTabURL}}", "_newtab");
    }
  </script>
  <div class="govuk-hide-this-page__position">
    {{ govukButton({
      text: text,
      classes: "govuk-button--warning",
      href: currentTabURL,
      attributes: {
        onclick: "govukHideThisPage()"
      }
    }) }}
  </div>
</div>
